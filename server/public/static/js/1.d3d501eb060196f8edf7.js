webpackJsonp([1],{"2bdB":function(t,s){},CMzx:function(t,s,o){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=o("Dd8w"),a=o.n(i),n=o("NYxO"),c=o("GQaK"),e={props:{food:Object},methods:{updateFoodCount:function(t){var s=this.food;this.$store.dispatch("updateFoodCount",{food:s,isAdd:t})}}},r={render:function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("div",{staticClass:"cartcontrol"},[o("transition",{attrs:{name:"move"}},[t.food.count?o("div",{staticClass:"iconfont icon-remove_circle_outline",on:{click:function(s){s.stopPropagation(),t.updateFoodCount(!1)}}}):t._e()]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.food.count,expression:"food.count"}],staticClass:"cart-count"},[t._v(t._s(t.food.count))]),t._v(" "),o("div",{staticClass:"iconfont icon-add_circle",on:{click:function(s){s.stopPropagation(),t.updateFoodCount(!0)}}})],1)},staticRenderFns:[]};var l=o("VU/8")(e,r,!1,function(t){o("hswm")},"data-v-8456b6c4",null).exports,d={data:function(){return{isShow:!1}},props:{food:Object},components:{CartControl:l},methods:{toggleShow:function(){this.isShow=!this.isShow}}},v={render:function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("transition",{attrs:{name:"fade"}},[t.isShow?o("div",{ref:"food",staticClass:"food"},[o("div",{staticClass:"food-content"},[o("div",{staticClass:"image-header"},[o("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.food.image,expression:"food.image"}]}),t._v(" "),o("p",{staticClass:"foodpanel-desc"},[t._v(t._s(t.food.info))]),t._v(" "),o("div",{staticClass:"back",on:{click:t.toggleShow}},[o("i",{staticClass:"iconfont icon-arrow_left"})])]),t._v(" "),o("div",{staticClass:"content"},[o("h1",{staticClass:"title"},[t._v(t._s(t.food.name))]),t._v(" "),o("div",{staticClass:"detail"},[o("span",{staticClass:"sell-count"},[t._v("月售"+t._s(t.food.sellCount)+"份")]),t._v(" "),o("span",{staticClass:"rating"},[t._v("好评率"+t._s(t.food.rating)+"%")])]),t._v(" "),o("div",{staticClass:"price"},[o("span",{staticClass:"now"},[t._v("￥"+t._s(t.food.prize))]),t._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:t.food.oldPrice,expression:"food.oldPrice"}],staticClass:"old",staticStyle:{display:"none"}},[t._v(t._s(t.food.oldPrice)+"￥")])]),t._v(" "),o("div",{staticClass:"cartcontrol-wrapper"},[o("CartControl",{attrs:{food:t.food}})],1)])]),t._v(" "),o("div",{staticClass:"food-cover",on:{click:t.toggleShow}})]):t._e()])},staticRenderFns:[]};var f=o("VU/8")(d,v,!1,function(t){o("iwjH")},"data-v-2cd72af1",null).exports,h={data:function(){return{isShow:!1}},computed:a()({},Object(n.c)(["cartFoods","info"]),Object(n.b)(["cartFoodCount","cartFoodPrice"]),{payText:function(){var t=this.cartFoodPrice,s=this.info.minPrice;return 0===t?"￥"+s+"开送":t<s?"￥"+(s-t)+"开始配送":"去结算"},payClass:function(){var t=this.cartFoodPrice,s=this.info.minPrice;if(t>s)return t-s>=0?"enough":"not-enough"},listShow:function(){var t=this;return 0===this.cartFoodCount?(this.isShow=!1,!1):(this.isShow&&this.$nextTick(function(){t.scroll?t.scroll.refresh():(console.log("------"),t.scroll=new c.a(t.$refs.list,{click:!0}))}),this.isShow)}}),methods:{toggleShow:function(){this.cartFoodCount&&(this.isShow=!this.isShow)}},components:{CartControl:l}},u={render:function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("div",[o("div",{staticClass:"shopcart"},[o("div",{staticClass:"content"},[o("div",{staticClass:"content-left",on:{click:t.toggleShow}},[o("div",{staticClass:"logo-wrapper"},[o("div",{staticClass:"logo",class:{highlight:t.cartFoodCount}},[o("i",{staticClass:"iconfont icon-shopping_cart",class:{highlight:t.cartFoodCount}})]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.cartFoodCount,expression:"cartFoodCount"}],staticClass:"num"},[t._v(t._s(t.cartFoodCount))])]),t._v(" "),o("div",{staticClass:"price",class:{highlight:t.cartFoodPrice}},[t._v("￥"+t._s(t.cartFoodPrice))]),t._v(" "),o("div",{staticClass:"desc"},[t._v("另需配送费￥"+t._s(t.info.deliveryPrice)+"元")])]),t._v(" "),o("div",{staticClass:"content-right"},[o("div",{staticClass:"pay",class:t.payClass},[t._v("\n          "+t._s(t.payText)+"\n        ")])])]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"shopcart-list"},[t._m(0),t._v(" "),o("div",{ref:"list",staticClass:"list-content"},[o("ul",t._l(t.cartFoods,function(s,i){return o("li",{key:i,staticClass:"food"},[o("span",{staticClass:"name"},[t._v(t._s(s.name))]),t._v(" "),o("div",{staticClass:"price"},[o("span",[t._v("￥"+t._s(s.price))])]),t._v(" "),o("div",{staticClass:"cartcontrol-wrapper"},[o("CartControl",{attrs:{food:s}})],1)])}))])])]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"list-mask",on:{click:t.toggleShow}})])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"list-header"},[s("h1",{staticClass:"title"},[this._v("购物车")]),this._v(" "),s("span",{staticClass:"empty"},[this._v("清空")])])}]};var _=o("VU/8")(h,u,!1,function(t){o("2bdB")},"data-v-0110db44",null).exports,p={data:function(){return{scrollY:0,tops:[],food:{}}},mounted:function(){var t=this;this.$store.dispatch("getGoods",function(){t.$nextTick(function(){t._initTop(),t._initScroll()})})},computed:a()({},Object(n.c)(["goods"]),{currentIndex:function(){var t=this.scrollY,s=this.tops,o=s.findIndex(function(o,i){return t>=o&&t<s[i+1]});return this._initLeftScroll(o),o}}),methods:{_initTop:function(){var t=[],s=0;t.push(s);var o=this.$refs.foodsUl.getElementsByClassName("food-list-hook");Array.prototype.slice.call(o).forEach(function(o){s+=o.clientHeight,t.push(s)}),this.tops=t},_initScroll:function(){var t=this;this.leftScroll=new c.a(".menu-wrapper",{scrollY:!0,click:!0}),this.rightScroll=new c.a(".foods-wrapper",{probeType:1,click:!0}),this.rightScroll.on("scroll",function(s){var o=s.x,i=s.y;console.log("scroll",{x:o,y:i}),t.scrollY=Math.abs(i)}),this.rightScroll.on("scrollEnd",function(s){var o=s.x,i=s.y;console.log("scrollEnd",{x:o,y:i}),t.scrollY=Math.abs(i)})},_initLeftScroll:function(t){if(this.leftScroll){var s=this.$refs.menuUl.children[t];this.leftScroll.scrollToElement(s,300)}},clickItem:function(t){var s=this.tops[t];this.scrollY=s,this.rightScroll.scrollTo(0,-s,300)},showFood:function(t){this.food=t,this.$refs.food.toggleShow()}},components:{CartControl:l,Food:f,ShopCart:_}},C={render:function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("div",[o("div",{staticClass:"goods"},[o("div",{staticClass:"menu-wrapper"},[o("ul",{ref:"menuUl"},t._l(t.goods,function(s,i){return o("li",{key:i,staticClass:"menu-item",class:{current:i===t.currentIndex},on:{click:function(s){t.clickItem(i)}}},[o("span",{staticClass:"text bottom-border-1px"},[s.icon?o("img",{staticClass:"icon",attrs:{src:s.icon}}):t._e(),t._v("\n            "+t._s(s.name)+"\n          ")])])}))]),t._v(" "),o("div",{staticClass:"foods-wrapper"},[o("ul",{ref:"foodsUl"},t._l(t.goods,function(s,i){return o("li",{key:i,staticClass:"food-list-hook"},[o("h1",{staticClass:"title"},[t._v(t._s(s.name))]),t._v(" "),o("ul",t._l(s.foods,function(s,i){return o("li",{key:i,staticClass:"food-item bottom-border-1px",on:{click:function(o){t.showFood(s)}}},[o("div",{staticClass:"icon"},[o("img",{attrs:{width:"57",height:"57",src:s.icon}})]),t._v(" "),o("div",{staticClass:"content"},[o("h2",{staticClass:"name"},[t._v(t._s(s.name))]),t._v(" "),o("p",{staticClass:"desc"},[t._v(t._s(s.description))]),t._v(" "),o("div",{staticClass:"extra"},[o("span",{staticClass:"count"},[t._v("月售"+t._s(s.sellCount)+"份")]),t._v(" "),o("span",[t._v("好评率"+t._s(s.rating)+"%")])]),t._v(" "),o("div",{staticClass:"price"},[o("span",{staticClass:"now"},[t._v("￥"+t._s(s.price))]),t._v(" "),s.oldPrice?o("span",{staticClass:"old"},[t._v("￥"+t._s(s.oldPrice))]):t._e()]),t._v(" "),o("div",{staticClass:"cartcontrol-wrapper"},[o("CartControl",{attrs:{food:s}})],1)])])}))])}))]),t._v(" "),o("ShopCart",{attrs:{food:t.food}})],1),t._v(" "),o("Food",{ref:"food",attrs:{food:t.food}})],1)},staticRenderFns:[]};var m=o("VU/8")(p,C,!1,function(t){o("M939")},null,null);s.default=m.exports},M939:function(t,s){},hswm:function(t,s){},iwjH:function(t,s){}});
//# sourceMappingURL=1.d3d501eb060196f8edf7.js.map